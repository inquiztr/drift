{"version":3,"sources":["../src/js/Drift.js"],"names":["isDOMElement","injectBaseStylesheet","Trigger","ZoomPane","Drift","triggerEl","options","VERSION","destroy","bind","TypeError","namespace","showWhitespaceAtEdges","containInline","inlineOffsetX","inlineOffsetY","inlineContainer","document","body","sourceAttribute","zoomFactor","paneContainer","undefined","inlinePane","handleTouch","onShow","onHide","injectBaseStyles","hoverDelay","touchDelay","hoverBoundingBox","touchBoundingBox","boundingBoxContainer","passive","settings","_buildZoomPane","_buildTrigger","zoomPane","container","inline","trigger","el","imageURL","_setImageURL","enabled","_hide","_unbindEvents","isShowing","zf","boundingBox","Object","defineProperty","prototype","get","set","value","setZoomImageURL","disable","enable"],"mappings":"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","sourcesContent":["import { isDOMElement } from \"./util/dom\";\r\nimport injectBaseStylesheet from \"./injectBaseStylesheet\";\r\n\r\nimport Trigger from \"./Trigger\";\r\nimport ZoomPane from \"./ZoomPane\";\r\n\r\nexport default class Drift {\r\n  constructor(triggerEl, options = {}) {\r\n    this.VERSION = \"1.5.0\";\r\n    this.triggerEl = triggerEl;\r\n\r\n    this.destroy = this.destroy.bind(this);\r\n\r\n    if (!isDOMElement(this.triggerEl)) {\r\n      throw new TypeError(\"`new Drift` requires a DOM element as its first argument.\");\r\n    }\r\n\r\n    // Prefix for generated element class names (e.g. `my-ns` will\r\n    // result in classes such as `my-ns-pane`. Default `drift-`\r\n    // prefixed classes will always be added as well.\r\n    const namespace = options[\"namespace\"] || null;\r\n    // Whether the ZoomPane should show whitespace when near the edges.\r\n    const showWhitespaceAtEdges = options[\"showWhitespaceAtEdges\"] || false;\r\n    // Whether the inline ZoomPane should stay inside\r\n    // the bounds of its image.\r\n    const containInline = options[\"containInline\"] || false;\r\n    // How much to offset the ZoomPane from the\r\n    // interaction point when inline.\r\n    const inlineOffsetX = options[\"inlineOffsetX\"] || 0;\r\n    const inlineOffsetY = options[\"inlineOffsetY\"] || 0;\r\n    // A DOM element to append the inline ZoomPane to\r\n    const inlineContainer = options[\"inlineContainer\"] || document.body;\r\n    // Which trigger attribute to pull the ZoomPane image source from.\r\n    const sourceAttribute = options[\"sourceAttribute\"] || \"data-zoom\";\r\n    // How much to magnify the trigger by in the ZoomPane.\r\n    // (e.g., `zoomFactor: 3` will result in a 900 px wide ZoomPane imag\r\n    // if the trigger is displayed at 300 px wide)\r\n    const zoomFactor = options[\"zoomFactor\"] || 3;\r\n    // A DOM element to append the non-inline ZoomPane to.\r\n    // Required if `inlinePane !== true`.\r\n    const paneContainer = options[\"paneContainer\"] === undefined ? document.body : options[\"paneContainer\"];\r\n    // When to switch to an inline ZoomPane. This can be a boolean or\r\n    // an integer. If `true`, the ZoomPane will always be inline,\r\n    // if `false`, it will switch to inline when `windowWidth <= inlinePane`\r\n    const inlinePane = options[\"inlinePane\"] || 375;\r\n    // If `true`, touch events will trigger the zoom, like mouse events.\r\n    const handleTouch = \"handleTouch\" in options ? !!options[\"handleTouch\"] : true;\r\n    // If present (and a function), this will be called\r\n    // whenever the ZoomPane is shown.\r\n    const onShow = options[\"onShow\"] || null;\r\n    // If present (and a function), this will be called\r\n    // whenever the ZoomPane is hidden.\r\n    const onHide = options[\"onHide\"] || null;\r\n    // Add base styles to the page. See the \"Theming\"\r\n    // section of README.md for more information.\r\n    const injectBaseStyles = \"injectBaseStyles\" in options ? !!options[\"injectBaseStyles\"] : true;\r\n    // An optional number that determines how long to wait before\r\n    // showing the ZoomPane because of a `mouseenter` event.\r\n    const hoverDelay = options[\"hoverDelay\"] || 0;\r\n    // An optional number that determines how long to wait before\r\n    // showing the ZoomPane because of a `touchstart` event.\r\n    // It's unlikely that you would want to use this option, since\r\n    // \"tap and hold\" is much more intentional than a hover event.\r\n    const touchDelay = options[\"touchDelay\"] || 0;\r\n    // If true, a bounding box will show the area currently being previewed\r\n    // during mouse hover\r\n    const hoverBoundingBox = options[\"hoverBoundingBox\"] || false;\r\n    // If true, a bounding box will show the area currently being previewed\r\n    // during touch events\r\n    const touchBoundingBox = options[\"touchBoundingBox\"] || false;\r\n    // A DOM element to append the bounding box to.\r\n    const boundingBoxContainer = options[\"boundingBoxContainer\"] || document.body;\r\n    // If true, the events related to handleTouch use passive listeners in\r\n    // order to improve performance for touch devices.\r\n    const passive = options[\"passive\"] || false;\r\n\r\n    if (inlinePane !== true && !isDOMElement(paneContainer)) {\r\n      throw new TypeError(\"`paneContainer` must be a DOM element when `inlinePane !== true`\");\r\n    }\r\n    if (!isDOMElement(inlineContainer)) {\r\n      throw new TypeError(\"`inlineContainer` must be a DOM element\");\r\n    }\r\n\r\n    this.settings = {\r\n      namespace,\r\n      showWhitespaceAtEdges,\r\n      containInline,\r\n      inlineOffsetX,\r\n      inlineOffsetY,\r\n      inlineContainer,\r\n      sourceAttribute,\r\n      zoomFactor,\r\n      paneContainer,\r\n      inlinePane,\r\n      handleTouch,\r\n      onShow,\r\n      onHide,\r\n      injectBaseStyles,\r\n      hoverDelay,\r\n      touchDelay,\r\n      hoverBoundingBox,\r\n      touchBoundingBox,\r\n      boundingBoxContainer,\r\n      passive,\r\n    };\r\n\r\n    if (this.settings.injectBaseStyles) {\r\n      injectBaseStylesheet();\r\n    }\r\n\r\n    this._buildZoomPane();\r\n    this._buildTrigger();\r\n  }\r\n\r\n  get isShowing() {\r\n    return this.zoomPane.isShowing;\r\n  }\r\n\r\n  get zoomFactor() {\r\n    return this.settings.zoomFactor;\r\n  }\r\n\r\n  set zoomFactor(zf) {\r\n    this.settings.zoomFactor = zf;\r\n    this.zoomPane.settings.zoomFactor = zf;\r\n    this.trigger.settings.zoomFactor = zf;\r\n    this.boundingBox.settings.zoomFactor = zf;\r\n  }\r\n\r\n  _buildZoomPane() {\r\n    this.zoomPane = new ZoomPane({\r\n      container: this.settings.paneContainer,\r\n      zoomFactor: this.settings.zoomFactor,\r\n      showWhitespaceAtEdges: this.settings.showWhitespaceAtEdges,\r\n      containInline: this.settings.containInline,\r\n      inline: this.settings.inlinePane,\r\n      namespace: this.settings.namespace,\r\n      inlineOffsetX: this.settings.inlineOffsetX,\r\n      inlineOffsetY: this.settings.inlineOffsetY,\r\n      inlineContainer: this.settings.inlineContainer,\r\n    });\r\n  }\r\n\r\n  _buildTrigger() {\r\n    this.trigger = new Trigger({\r\n      el: this.triggerEl,\r\n      zoomPane: this.zoomPane,\r\n      handleTouch: this.settings.handleTouch,\r\n      onShow: this.settings.onShow,\r\n      onHide: this.settings.onHide,\r\n      sourceAttribute: this.settings.sourceAttribute,\r\n      hoverDelay: this.settings.hoverDelay,\r\n      touchDelay: this.settings.touchDelay,\r\n      hoverBoundingBox: this.settings.hoverBoundingBox,\r\n      touchBoundingBox: this.settings.touchBoundingBox,\r\n      namespace: this.settings.namespace,\r\n      zoomFactor: this.settings.zoomFactor,\r\n      boundingBoxContainer: this.settings.boundingBoxContainer,\r\n      passive: this.settings.passive,\r\n    });\r\n  }\r\n\r\n  setZoomImageURL(imageURL) {\r\n    this.zoomPane._setImageURL(imageURL);\r\n  }\r\n\r\n  disable() {\r\n    this.trigger.enabled = false;\r\n  }\r\n\r\n  enable() {\r\n    this.trigger.enabled = true;\r\n  }\r\n\r\n  destroy() {\r\n    this.trigger._hide();\r\n    this.trigger._unbindEvents();\r\n  }\r\n}\r\n\r\n// Public API\r\n/* eslint-disable no-self-assign */\r\nObject.defineProperty(Drift.prototype, \"isShowing\", {\r\n  get: function () {\r\n    return this.isShowing;\r\n  },\r\n});\r\nObject.defineProperty(Drift.prototype, \"zoomFactor\", {\r\n  get: function () {\r\n    return this.zoomFactor;\r\n  },\r\n  set: function (value) {\r\n    this.zoomFactor = value;\r\n  },\r\n});\r\nDrift.prototype[\"setZoomImageURL\"] = Drift.prototype.setZoomImageURL;\r\nDrift.prototype[\"disable\"] = Drift.prototype.disable;\r\nDrift.prototype[\"enable\"] = Drift.prototype.enable;\r\nDrift.prototype[\"destroy\"] = Drift.prototype.destroy;\r\n/* eslint-enable no-self-assign */\r\n"],"file":"Drift.js"}